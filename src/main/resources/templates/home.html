<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" type="text/css" th:href="@{/css/editinfo.css}"/>
    <title>메인 페이지</title>
</head>
<body>
<form action="/editinfo" method="GET">
        <!-- 현재 로그인한 회원 id를 찾은 뒤 여기로 전달해줘야함 -->
<!--    현재 로그인 시, userid를 메인 페이지에 전달해서 뿌려주고 있음-->
    <input id="login_user" type="hidden" name="id" th:value="${user.id}">
    <button type="submit">회원정보수정</button>
    <button type="button" onClick="location.href='/enroll'" style="background-color: gray;">원룸 등록하기</button>
</form>


<script th:inline="javascript">

    /** 세션 데이터 불러와서 여기서 login_user의 value값으로 넣어줘야함 */
    /** 굳이..세션 데이터에 안넣어줘도 지금은 되긴할듯? 메인페이지에 현재 id 값 넘겼음 */

    /**  홈화면에 접속 시, 현재 접속한 유저의 ID 값 Update */
    const login_userID = document.getElementById('login_user').value;
    localStorage.setItem('login_userId', login_userID);

    /*<![CDATA[*/
    // 옵션 생성기
    function createOption(text, value){
        var objOption = document.createElement("option");
        objOption.text = text;
        objOption.value = value;
        return objOption;
    }


    function updateGenre(nation){
        // 장르 컨텐츠 찾기
        const gens = document.getElementById('gens');
        // 맨 위에 제외 전부삭제
        for(let i=1; i<gens.options.length; i++)
        {
            gens.remove(i);
        }
        // gens.options.length=0;
        // 새롭게 세팅
        if(nation == "미국"){
            gens.options.add(createOption("DC코믹스마블","DC코믹스마블"))
            gens.options.add(createOption("코믹스리터러리","코믹스리터러리"))
            gens.options.add(createOption("그래픽노블","그래픽노블"))
        }

        else if(nation == "대한민국"){
            gens.options.add(createOption("순정만화","순정만화"))
            gens.options.add(createOption("소년만화","소년만화"))
            gens.options.add(createOption("성인만화","성인만화"))
            gens.options.add(createOption("기획도서","기획도서"))
            gens.options.add(createOption("만화잡지","만화잡지"))
        }

        else if(nation == "일본"){
            gens.options.add(createOption("순정만화","순정만화"))
            gens.options.add(createOption("소년만화","소년만화"))
            gens.options.add(createOption("성인만화","성인만화"))
            gens.options.add(createOption("기획도서","기획도서"))
        }
    }

    // 국가 변경 시, 장르 풀 변경
    function changeGenre(){
        const ns = document.getElementById('ns');
        var current_ns = ns.options[ns.selectedIndex].value;
        // 현재 국가에 맞게 장르 업데이트
        updateGenre(current_ns)

    }



</script>
</body>
</html>



